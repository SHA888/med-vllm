[mypy]
python_version = 3.12

# Core type checking options
disallow_untyped_defs = 1  # Require type annotations for functions
disallow_incomplete_defs = 1  # Require all function parameters to have type annotations
check_untyped_defs = 1  # Type-check the interior of functions without type annotations
no_implicit_optional = 1  # Don't allow implicit Optional[] types
warn_return_any = 1  # Warn about returning Any from functions
warn_unused_configs = 1  # Warn about unused sections in config
warn_redundant_casts = 1  # Warn about redundant casts
warn_unused_ignores = 1  # Warn about unneeded # type: ignore comments
warn_no_return = 1  # Warn about functions missing return statements
warn_unreachable = 1  # Warn about unreachable code
strict_equality = 1  # More strict equality checks
disallow_any_unimported = 1  # Disallow Any types from unfollowed imports

# Custom stubs path
mypy_path = "medvllm/typeshed"

# Per-module configurations
[mypy-medvllm.medical.config.*]
# Enable strict type checking for config files
check_untyped_defs = True

[mypy-medvllm.medical.config.medical_config]
# Add specific rules for medical_config.py here

[mypy-medvllm.medical.config.serialization]
# Add specific rules for serialization.py here

[mypy-medvllm.medical.config.schema]
# Add specific rules for schema.py here

# Ignore third-party packages without stubs
[mypy-flash_attn.*]
ignore_missing_imports = True

[mypy-triton.*]
ignore_missing_imports = True
